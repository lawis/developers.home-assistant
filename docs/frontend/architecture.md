---
title: "Frontend Architecture 前端架构"
sidebar_label: "Architecture 架构"
---

Home Assistant前端是使用Web组件构建的。这是一种现代的Web技术，允许我们将模板、样式和逻辑封装到一个文件中，并将其作为HTML标签在浏览器中公开。这些组件是可组合的，为我们的应用程序提供了非常动态和强大的基础。

## 结构

Home Assistant前端可以分为4个部分：

### 启动引导

文件：`src/entrypoints/core.js`

这是一个非常小的脚本，它是在页面加载时首先加载的内容。它负责检查身份验证凭据并设置与后端的WebSocket连接。

该脚本允许我们在同时下载其他UI时开始下载数据。

### 应用程序壳

文件：`src/entrypoints/app.js`

这包含了渲染侧边栏和处理路由的所有内容。

### 面板

文件夹：`src/panels/`

Home Assistant中的每个页面都是一个面板。组件可以注册额外的面板以显示给用户。面板的示例包括“状态”、“地图”、“日志”和“历史记录”。

### 对话框

文件夹：`src/dialogs`

某些信息和数据输入以流的方式呈现给用户。对话框可以在任何页面上触发。最常见的是实体更多信息对话框，它允许用户查看实体的状态、历史记录和设置。

## 数据流

前端利用[Websocket API](api/websocket.md)和[Rest API](api/rest.md)与Home Assistant进行交互。

数据通过名为`hass`的属性提供给每个组件。`hass`属性包含核心状态并具有调用API的方法。

组件可以订阅在核心状态中不可用的信息。订阅通过WebSocket API运行，将数据与后端保持同步。

我们使用单向数据流。当您在后端进行更改（例如打开灯），`hass`对象将在应用程序根部更新，并可供每个需要它的组件使用。

## 路由

前端使用分散式路由。每个组件只需要了解与其负责部分的路由处理方式即可。进一步的路由由组件树传递下去。

例如，`<home-assistant>`主组件将查看URL的第一部分以确定应加载哪个面板。每个面板可以在URL和要显示内容之间具有自己的映射关系。